<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>JSONAPI .Net Core</title>

        <link rel="stylesheet" href="https://research-institute.github.io/json-api-dotnet-core/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://research-institute.github.io/json-api-dotnet-core/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://research-institute.github.io/json-api-dotnet-core/css/highlight.tomorrow-night.css">
        <link rel="stylesheet" href="https://research-institute.github.io/json-api-dotnet-core/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="https://research-institute.github.io/json-api-dotnet-core/">
                JSONAPI .Net Core
                <small class="hidden-xs hidden-sm">
                    killing boilerplate in dotnet web APIs
                </small>
            </a>

                            <a href="https://github.com/research-institute/json-api-dotnet-core">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                                                    <p class="text-muted">
                                Getting Started
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/index.html">
                                            About
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/installation.html">
                                            Installation
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/usage.html">
                                            Step by Step
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Usage
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/models.html">
                                            Models
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/contextgraph.html">
                                            Context Graph
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/meta.html">
                                            Meta
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/options.html">
                                            Global Options
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/errors.html">
                                            Custom Errors
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/filtering.html">
                                            Filtering
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/includingrelationships.html">
                                            Including Relationships
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/pagination.html">
                                            Pagination
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/routing.html">
                                            Routing
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/sorting.html">
                                            Sorting
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/sparsefieldsets.html">
                                            Sparse Fieldsets
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Extensibility
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="active">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/layers.html">
                                            The Layers
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/controllers.html">
                                            Controllers
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/resourceservices.html">
                                            Resource Services
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/entityrepositories.html">
                                            Entity Repositories
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://research-institute.github.io/json-api-dotnet-core/middleware.html">
                                            Middleware
                                        </a>
                                    </li>
                                                            </ul>
                        
                    </nav>

                
                <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1 id="the-layers">The Layers</h1>
<p>By default, data retrieval is distributed across 3 layers:</p>
<ol>
<li><a href="https://github.com/Research-Institute/json-api-dotnet-core/blob/master/src/JsonApiDotNetCore/Controllers/JsonApiController.cs">JsonApiController</a> (required)</li>
<li><a href="https://github.com/Research-Institute/json-api-dotnet-core/blob/master/src/JsonApiDotNetCore/Services/IResourceService.cs">IResourceService</a> (default <a href="https://github.com/Research-Institute/json-api-dotnet-core/blob/master/src/JsonApiDotNetCore/Services/EntityResourceService.cs">EntityResourceService</a>)</li>
<li><a href="https://github.com/Research-Institute/json-api-dotnet-core/blob/master/src/JsonApiDotNetCore/Data/IEntityRepository.cs">IEntityRepository</a> (default <a href="https://github.com/Research-Institute/json-api-dotnet-core/blob/master/src/JsonApiDotNetCore/Data/DefaultEntityRepository.cs">DefaultEntityRepository</a>)</li>
</ol>
<p>Customization can be done at any of these layers. However, it is recommended that you make your customizations at the service or the repository layer when possible to keep the controllers free of unnecessary logic. You can use the following as a general rule of
thumb for where to put business logic:</p>
<ul>
<li><strong>Controller</strong>: simple validation logic that should result in the return of specific HTTP status codes such as model validation</li>
<li><strong>IResourceService</strong>: advanced BL and replacement of data access mechanisms</li>
<li><strong>IEntityRepository</strong>: custom logic that builds on the EF APIs, such as Authorization of data</li>
</ul>
<h2 id="replacing-services--repositories">Replacing Services / Repositories</h2>
<p>Replacing services is done on a per resource basis and can be done through simple DI
in your Startup.cs file:</p>
<pre><code class="language-csharp">public IServiceProvider ConfigureServices(IServiceCollection services)
{
    // custom service
    services.AddScoped&lt;IEntityRepository&lt;Person&gt;, CustomPersonService&gt;();

    // custom repository
    services.AddScoped&lt;IEntityRepository&lt;TodoItem&gt;, AuthorizedTodoItemRepository&gt;();

    // ...
}</code></pre>
<h2 id="not-using-entity-framework">Not Using Entity Framework?</h2>
<p>Out of the box, the library uses your <code>DbContext</code> to create a &quot;ContextGraph&quot; or map of all your models and their relationships. If, however, you have models that are not members of a <code>DbContext</code>, you can manually create this graph like so:</p>
<pre><code class="language-csharp">// Startup.cs
public void ConfigureServices(IServiceCollection services)
{
    // Add framework services.
    var mvcBuilder = services.AddMvc();

    services.AddJsonApi(options =&gt; {
        options.Namespace = "api/v1";
        options.BuildContextGraph((builder) =&gt; {
            builder.AddResource&lt;MyModel&gt;("my-models");
        });
    }, mvcBuilder);
    // ...
}</code></pre>
                </section>

            </div>
        </main>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
